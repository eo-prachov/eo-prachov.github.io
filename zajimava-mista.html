<!DOCTYPE html>
<html lang="cs">
<head>
    <title>Zajímavá místa v okolí | Eko-Oáza Prachov</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Tipy na výlety v okolí Eko-Oázy Prachov.">
    <link rel="canonical" href="https://www.e-o-p.unas.cz/zajimava-mista.html">
    <style>
        :root{--primary-blue:#007bff;--text-color:#333;--background-color:#fff;--container-bg:#2570b8}
        *, *:before, *:after { box-sizing: border-box; }
        /* FIX APPLIED: Removed display:flex and justify-content:center from body */
        body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;background-color:var(--container-bg);color:var(--text-color);margin:0;padding:0;font-size:18px;line-height:1.6}
        
        .container{
            background-color:var(--background-color);
            width:100%;
            max-width:1200px;
            /* FIX APPLIED: Changed margin:20px to margin:20px auto to center the block */
            margin:20px auto;
            padding:20px;
            box-shadow:0 0 15px rgba(0,0,0,.2); 
            display: flex;
            flex-direction: column;
        }

        header{padding:20px 0;margin-bottom:20px;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;background-color:var(--background-color);z-index:100;border-bottom:1px solid #eee;box-shadow:0 2px 5px rgba(0,0,0,.05)}
        header h1{margin:0;font-size:28px}
        header h1 a{text-decoration:none;color:var(--text-color)}
        nav a{margin-left:15px;text-decoration:none;color:var(--primary-blue);font-weight:700;cursor:pointer}
        nav a:hover{text-decoration:underline}
        
        .info-box{border:1px solid #ccc;padding:15px;margin-bottom:20px;background-color:#f9f9f9}
        .info-box p{margin:5px 0}
        .gallery{display:flex;flex-wrap:wrap;gap:10px;margin:20px 0}
        .gallery img{flex:1 1 200px;max-width:23.5%;height:auto;object-fit:cover;cursor:pointer;transition:transform .2s ease-in-out,box-shadow .2s;display:block}
        .gallery img:hover{transform:scale(1.05);box-shadow:0 4px 8px rgba(0,0,0,.2)}
        .modal{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;overflow:hidden;background-color:rgba(0,0,0,.9)}.modal-content-wrapper{position:relative;height:100%;width:100%;display:flex;align-items:center;justify-content:center;overflow:auto}.modal-content{margin:auto;display:block;max-width:90%;max-height:90%;transition:transform .3s ease-in-out;cursor:zoom-in}.modal-content.zoom-1{transform:scale(1.5);cursor:zoom-in}.modal-content.zoom-2{transform:scale(2.5);cursor:zoom-out}.close{position:absolute;top:15px;right:35px;color:#f1f1f1;font-size:40px;font-weight:700;transition:.3s;cursor:pointer;z-index:1001}.close:hover,.close:focus{color:#bbb}.prev,.next{cursor:pointer;position:absolute;top:50%;width:auto;padding:16px;margin-top:-50px;color:#fff;font-weight:700;font-size:30px;transition:.6s ease;border-radius:0 3px 3px 0;user-select:none;-webkit-user-select:none;z-index:1001}.next{right:0;border-radius:3px 0 0 3px}.prev{left:0}.prev:hover,.next:hover{background-color:rgba(0,0,0,.8)}
        footer{text-align:center;margin-top:20px;padding-top:10px;border-top:1px solid #ccc;font-size:14px;line-height:1.8}footer a{margin:0 5px}
        
        #admin-toolbar{display:none;position:fixed;top:0;left:0;width:100%;background:#2c3e50;color:#fff;padding:10px;z-index:9999;box-shadow:0 2px 5px rgba(0,0,0,.3);text-align:center; flex-wrap: wrap; justify-content: center;}
        #admin-toolbar button{background:#3498db;color:#fff;border:none;padding:8px 15px;cursor:pointer;border-radius:3px;margin:5px;font-size:14px}
        #admin-toolbar button:hover{background:#2980b9}
        #admin-toolbar button#save-btn{background:#27ae60}
        #admin-toolbar button#save-btn:hover{background:#229954}
        #admin-toolbar button#upload-restore-btn{background:#8e44ad}
        #admin-toolbar button#upload-restore-btn:hover{background:#732d91}
        #admin-toolbar button#logout-btn{background:#e74c3c}
        #admin-toolbar button#logout-btn:hover{background:#c0392b}

        /* STRICT CSS: Only show outline if body has admin-mode class */
        body.admin-mode .editable-text[contenteditable=true]{outline:2px dashed #3498db}
        
        #login-modal{display:none;position:fixed;z-index:10001;left:0;top:0;width:100%;height:100%;background-color:rgba(0,0,0,.6)}
        #login-modal form{background-color:#fefefe;margin:15% auto;padding:20px;border:1px solid #888;width:80%;max-width:400px;text-align:center;border-radius:5px}
        #login-modal input{width:90%;padding:12px 20px;margin:8px 0;display:inline-block;border:1px solid #ccc;box-sizing:border-box}
        #login-modal button{background-color:#4caf50;color:#fff;padding:14px 20px;margin:8px 0;border:none;cursor:pointer;width:90%}.delete-mode .editable-text{outline:2px dashed red;cursor:crosshair}.delete-mode .editable-text:hover{background-color:#ff000020}

        .editable-text { 
            width: 100%;
            overflow-wrap: anywhere; 
            word-wrap: break-word; 
            word-break: break-word; 
            hyphens: auto;
            max-width: 100%;
        }
        img { max-width: 100%; height: auto; }

        @media screen and (max-width:768px){
            body{font-size:16px}
            .container{margin:0;padding:10px;box-shadow:none}
            header{flex-direction:column;align-items:flex-start;position:static;box-shadow:none;padding:15px 0}
            header h1{margin-bottom:10px;font-size:24px}
            nav{display:flex;justify-content:space-around;width:100%}
            nav a{margin:5px 0;font-size:14px}
            .gallery img{max-width:48%;flex-basis:48%}
        }
    </style>
</head>
<body>
    <div id="admin-toolbar">
        <span>Režim úprav</span>
        <button id="save-btn" onclick="saveAllChanges()">Uložit změny</button>
        <button onclick="addTextBox()">+ Přidat text</button>
        <button id="delete-mode-btn" onclick="toggleDeleteMode()">Smazat text</button>
        <button id="logout-btn" onclick="logout()">Odhlásit se</button>
    </div>
    <div id="login-modal">
        <form onsubmit="handleLogin(event)">
            <h2>Admin Login</h2>
            <input type="email" id="email" value="admin@e-o-p.cz" required>
            <input type="password" id="password" placeholder="Heslo" required>
            <button type="submit">Přihlásit se</button>
            <p style="font-size: 12px; color: #777;">Pro zavření stiskněte Esc</p>
        </form>
    </div>

    <div class="container">
        <header>
            <h1><a id="logo-link" href="index.html">Eko-Oáza Prachov</a></h1>
            <nav id="nav-cs">
                <a href="index.html">Úvod</a>
                <a href="zajimava-mista.html">Zajímavá místa</a>
                <a onclick="switchLanguage('en')">English version</a>
            </nav>
            <nav id="nav-en" style="display:none;">
                <a href="index.html?lang=en">Home</a>
                <a href="zajimava-mista.html?lang=en">Places of interest</a>
                <a onclick="switchLanguage('cs')">Česká verze</a>
            </nav>
        </header>

        <main id="main-content">
            <div id="lang-cs">
                 <div class="info-box editable-text" data-field="cs-places-info-box"></div>
                 <div class="editable-text" data-field="cs-places-intro"></div>
                 <h4 class="editable-text" data-field="cs-places-header-1"></h4>
                 <div class="gallery">
                    <img src="obrazky/12.png" alt="Prachovské skály" onclick="openModal(this)"><img src="obrazky/13.png" alt="Prachovské skály" onclick="openModal(this)"><img src="obrazky/14.png" alt="Prachovské skály" onclick="openModal(this)"><img src="obrazky/15.png" alt="Prachovské skály" onclick="openModal(this)"><img src="obrazky/16.png" alt="Prachovské skály" onclick="openModal(this)">
                 </div>
                 <h4 class="editable-text" data-field="cs-places-header-2"></h4>
                 <div class="gallery">
                    <img src="obrazky/17.png" alt="Koupání" onclick="openModal(this)"><img src="obrazky/18.png" alt="Koupání" onclick="openModal(this)"><img src="obrazky/19.png" alt="Koupání" onclick="openModal(this)"><img src="obrazky/20.png" alt="Koupání" onclick="openModal(this)">
                 </div>
                 <h4 class="editable-text" data-field="cs-places-header-3"></h4>
                 <div class="gallery">
                    <img src="obrazky/21.png" alt="Hrad" onclick="openModal(this)"><img src="obrazky/22.png" alt="Hrad" onclick="openModal(this)"><img src="obrazky/23.png" alt="Zřícenina" onclick="openModal(this)"><img src="obrazky/24.png" alt="Zámek" onclick="openModal(this)"><img src="obrazky/25.png" alt="Zámek" onclick="openModal(this)"><img src="obrazky/26.png" alt="Hrad" onclick="openModal(this)"><img src="obrazky/27.png" alt="Hrad" onclick="openModal(this)"><img src="obrazky/28.png" alt="Jičín" onclick="openModal(this)">
                 </div>
                 <h4 class="editable-text" data-field="cs-places-header-4"></h4>
                 <div class="gallery">
                    <img src="obrazky/29.png" alt="Jičín" onclick="openModal(this)"><img src="obrazky/30.png" alt="Jičín" onclick="openModal(this)"><img src="obrazky/31.png" alt="Okolí" onclick="openModal(this)"><img src="obrazky/32.png" alt="Okolí" onclick="openModal(this)"><img src="obrazky/33.png" alt="Okolí" onclick="openModal(this)">
                 </div>
            </div>
            
            <div id="lang-en" style="display:none;">
                 <div class="info-box editable-text" data-field="en-places-info-box"></div>
                 <div class="editable-text" data-field="en-places-intro"></div>

                 <h4 class="editable-text" data-field="en-places-header-1"></h4>
                 <div class="gallery"><img src="obrazky/12.png" alt="Prachov Rocks" onclick="openModal(this)"><img src="obrazky/13.png" alt="Prachov Rocks" onclick="openModal(this)"><img src="obrazky/14.png" alt="Prachov Rocks" onclick="openModal(this)"><img src="obrazky/15.png" alt="Prachov Rocks" onclick="openModal(this)"><img src="obrazky/16.png" alt="Prachov Rocks" onclick="openModal(this)"></div>
                 
                 <h4 class="editable-text" data-field="en-places-header-2"></h4>
                 <div class="gallery"><img src="obrazky/17.png" alt="Swimming" onclick="openModal(this)"><img src="obrazky/18.png" alt="Swimming" onclick="openModal(this)"><img src="obrazky/19.png" alt="Swimming" onclick="openModal(this)"><img src="obrazky/20.png" alt="Swimming" onclick="openModal(this)"></div>
                 
                 <h4 class="editable-text" data-field="en-places-header-3"></h4>
                 <div class="gallery"><img src="obrazky/21.png" alt="Castle" onclick="openModal(this)"><img src="obrazky/22.png" alt="Castle" onclick="openModal(this)"><img src="obrazky/23.png" alt="Ruin" onclick="openModal(this)"><img src="obrazky/24.png" alt="Chateau" onclick="openModal(this)"><img src="obrazky/25.png" alt="Chateau" onclick="openModal(this)"><img src="obrazky/26.png" alt="Castle" onclick="openModal(this)"><img src="obrazky/27.png" alt="Castle" onclick="openModal(this)"><img src="obrazky/28.png" alt="Jičín" onclick="openModal(this)"></div>
                 
                 <h4 class="editable-text" data-field="en-places-header-4"></h4>
                 <div class="gallery"><img src="obrazky/29.png" alt="Jičín" onclick="openModal(this)"><img src="obrazky/30.png" alt="Jičín" onclick="openModal(this)"><img src="obrazky/31.png" alt="Surroundings" onclick="openModal(this)"><img src="obrazky/32.png" alt="Surroundings" onclick="openModal(this)"><img src="obrazky/33.png" alt="Surroundings" onclick="openModal(this)"></div>
            </div>
        </main>
        
        <footer id="footer-cs">
             Spolupráce: <a href="https://www.e-chalupy.cz/" target="_blank">e-chalupy.cz</a> <a href="https://www.levneubytovani.net/" target="_blank">LevneUbytovani.net</a> <a href="https://chalupy-ubytovani.cz/" target="_blank">chalupy-ubytovani.cz</a>
        </footer>
        <footer id="footer-en" style="display:none;">
            Cooperation with: <a href="https://www.e-chalupy.cz/" target="_blank">e-chalupy.cz</a> <a href="https://www.levneubytovani.net/" target="_blank">LevneUbytovani.net</a> <a href="https://chalupy-ubytovani.cz/" target="_blank">chalupy-ubytovani.cz</a>
        </footer>
    </div>
    
    <div id="myModal" class="modal">
        <span class="close" onclick="closeModal()">&times;</span>
        <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
        <a class="next" onclick="plusSlides(1)">&#10095;</a>
        <div class="modal-content-wrapper" onclick="handleModalClick(event)">
             <img class="modal-content" id="img01" onclick="handleImageClick(event)">
        </div>
    </div>
    
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    
    <script id="main-script">
        const firebaseConfig = { apiKey: "AIzaSyCuI9hhPtQMDkNqlQmmPfJRMWZWZFrT3hw", authDomain: "eko-oaza-website.firebaseapp.com", projectId: "eko-oaza-website", storageBucket: "eko-oaza-website.firebasestorage.app", messagingSenderId: "32000760259", appId: "1:32000760259:web:b6b797ca91de9bd7688576", measurementId: "G-0KLWHCEM16" };
        const app = firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        const modal = document.getElementById("myModal");
        const modalImg = document.getElementById("img01");
        const modalContentWrapper = document.querySelector(".modal-content-wrapper");
        let currentImageIndex, currentGalleryImages, isAdmin = false;
        let unsavedChanges = false;
        const loginModal = document.getElementById('login-modal');
        const seoData = { cs: { title: "Zajímavá místa v okolí | Eko-Oáza Prachov", description: "Tipy na výlety v okolí." }, en: { title: "Places of Interest | Eko-Oáza Prachov", description: "Trip ideas around Eko-Oáza Prachov." } };
        
        const RESTORE_DATA = {};

        function getPageDocId(lang) { const path = window.location.pathname; const page = path.split("/").pop().replace(".html", "") || "index"; return `${page}_${lang}`; }
        function updateSEO(lang) { document.title = seoData[lang].title; document.querySelector('meta[name="description"]').setAttribute('content', seoData[lang].description); }
        
        function setLanguage(lang) { 
            document.documentElement.lang = lang; 
            document.getElementById('lang-cs').style.display = lang === 'cs' ? 'block' : 'none'; 
            document.getElementById('lang-en').style.display = lang === 'en' ? 'block' : 'none'; 
            document.getElementById('nav-cs').style.display = lang === 'cs' ? 'flex' : 'none'; 
            document.getElementById('nav-en').style.display = lang === 'en' ? 'flex' : 'none'; 
            document.getElementById('footer-cs').style.display = lang === 'cs' ? 'block' : 'none'; 
            document.getElementById('footer-en').style.display = lang === 'en' ? 'block' : 'none'; 
            
            const logoLink = document.getElementById('logo-link');
            if(logoLink) {
                if(lang === 'en') {
                    logoLink.href = "index.html?lang=en";
                } else {
                    logoLink.href = "index.html";
                }
            }

            updateSEO(lang); 
            fetchFromDB();
        }
        
        function switchLanguage(lang) { if(checkUnsavedChanges()) { const currentPage = window.location.pathname.split('/').pop() || 'index.html'; window.location.href = `${currentPage}?lang=${lang}`; } }
        function openModal(element) { if (isAdmin) return; const parentGallery = element.closest('.gallery'); currentGalleryImages = Array.from(parentGallery.querySelectorAll('img')); currentImageIndex = currentGalleryImages.indexOf(element); modal.style.display = "block"; document.body.style.overflow = 'hidden'; showImage(currentImageIndex); }
        function showImage(index) { modalImg.src = currentGalleryImages[index].src; modalImg.alt = currentGalleryImages[index].alt; modalImg.className = 'modal-content'; modalContentWrapper.scrollTop = 0; modalContentWrapper.scrollLeft = 0; }
        function closeModal() { modal.style.display = "none"; document.body.style.overflow = 'auto'; }
        function plusSlides(n) { currentImageIndex = (currentImageIndex + n + currentGalleryImages.length) % currentGalleryImages.length; showImage(currentImageIndex); }
        function handleImageClick(event) { event.stopPropagation(); const img = event.target; if (img.classList.contains('zoom-2')) { img.classList.remove('zoom-2', 'zoom-1'); } else if (img.classList.contains('zoom-1')) { img.classList.add('zoom-1'); } else { img.classList.add('zoom-1'); } }
        function handleModalClick(event) { if (event.target === modalContentWrapper) closeModal(); }
        
        auth.onAuthStateChanged(user => { 
            isAdmin = !!user; 
            if (isAdmin) { enableAdminMode(); } 
            else { 
                disableAdminMode();
                fetchFromDB();
                setTimeout(fetchFromDB, 500);
                setTimeout(fetchFromDB, 1000);
                setInterval(() => { if(!isAdmin) fetchFromDB(); }, 10000); 
            } 
        });
        
        async function handleLogin(event) { event.preventDefault(); const email = document.getElementById('email').value; const password = document.getElementById('password').value; try { await auth.signInWithEmailAndPassword(email, password); loginModal.style.display = 'none'; } catch (error) { alert('Login failed: ' + error.message); } }
        async function logout() { if(checkUnsavedChanges()) { await auth.signOut(); location.reload(); } }
        
        window.addEventListener('beforeunload', function (e) { if (unsavedChanges) { e.preventDefault(); e.returnValue = ''; } });
        function checkUnsavedChanges() { if (unsavedChanges) { return confirm("Máte neuložené změny! Opravdu chcete odejít bez uložení? / Unsaved changes! Leave anyway?"); } return true; }

        function enableAdminMode() { 
            document.body.classList.add('admin-mode'); 
            document.getElementById('admin-toolbar').style.display = 'flex'; 
            document.querySelectorAll('.editable-text').forEach(el => { 
                el.contentEditable = true; 
                el.addEventListener('input', () => { unsavedChanges = true; });
            }); 
            if (contentRefreshInterval) clearInterval(contentRefreshInterval);
        }
        function disableAdminMode() { 
            document.body.classList.remove('admin-mode'); 
            document.body.classList.remove('delete-mode'); 
            document.getElementById('admin-toolbar').style.display = 'none'; 
            document.querySelectorAll('.editable-text').forEach(el => { el.contentEditable = false; }); 
        }

        async function saveAllChanges() {
            const promises = [];
            const currentLang = document.documentElement.lang;

            document.querySelectorAll('.editable-text').forEach(element => {
                const fieldId = element.dataset.field;
                if (!fieldId) return;

                const fieldLang = fieldId.startsWith('cs-') ? 'cs' : 'en';
                if (fieldLang !== currentLang) return; // Only save current lang fields

                const content = element.innerHTML;
                const docId = getPageDocId(fieldLang);
                const promise = db.collection('content').doc(docId).set({ [fieldId]: content }, { merge: true });
                promises.push(promise);
            });
            try {
                await Promise.all(promises);
                unsavedChanges = false;
                alert('Stránka uložena do databáze! / Page saved to DB! ♡');
            } catch (error) { console.error("Error saving:", error); alert("Error saving."); }
        }

        async function loadContent() {
            fetchFromDB();
        }

        async function fetchFromDB() {
            if (isAdmin && document.querySelector('.editable-text').innerHTML.trim().length > 0) {
                return;
            }

            const lang = document.documentElement.lang;
            const docId = getPageDocId(lang);
            try {
                const doc = await db.collection('content').doc(docId).get();
                if (doc.exists) {
                    const data = doc.data();
                    renderData(data);
                }
            } catch (error) { console.error("Error fetching DB: " + error); }
        }

        function renderData(data) {
            const lang = document.documentElement.lang;
            const mainContentContainer = document.getElementById(`lang-${lang}`);
            Object.keys(data).forEach(fieldId => {
                let element = document.querySelector(`[data-field="${fieldId}"]`);
                if (!element && fieldId.includes('-custom-')) {
                    element = document.createElement('p');
                    element.classList.add('editable-text');
                    element.dataset.field = fieldId;
                    mainContentContainer.appendChild(element);
                    if (isAdmin) {
                        element.contentEditable = true;
                        element.addEventListener('input', () => { unsavedChanges = true; });
                    }
                }
                if (element && data[fieldId]) {
                    if(element.innerHTML !== data[fieldId]) {
                        element.innerHTML = data[fieldId];
                        // FORCE CONTENT EDITABLE FALSE IF NOT ADMIN (Security)
                        if(!isAdmin) {
                            element.contentEditable = "false";
                        }
                    }
                }
            });
        }

        function addTextBox() { const lang = document.documentElement.lang; const newId = `${lang}-custom-${Date.now()}`; const newTextBox = document.createElement('p'); newTextBox.classList.add('editable-text'); newTextBox.dataset.field = newId; newTextBox.textContent = '...'; const mainContent = document.getElementById(`lang-${lang}`); mainContent.appendChild(newTextBox); if(isAdmin) { newTextBox.contentEditable = true; newTextBox.focus(); unsavedChanges = true; newTextBox.addEventListener('input', () => { unsavedChanges = true; }); } }
        function toggleDeleteMode() { const body = document.body; body.classList.toggle('delete-mode'); const btn = document.getElementById('delete-mode-btn'); if (body.classList.contains('delete-mode')) { btn.textContent = 'Ukončit mazání'; btn.style.background = 'orange'; } else { btn.textContent = 'Smazat text'; btn.style.background = '#3498db'; } }
        document.getElementById('main-content').addEventListener('click', async function(event) { if (!document.body.classList.contains('delete-mode')) return; const element = event.target.closest('.editable-text'); if (element) { event.preventDefault(); event.stopPropagation(); if (confirm('Delete this?')) { const fieldId = element.dataset.field; const lang = fieldId.startsWith('cs-') ? 'cs' : 'en'; const docId = getPageDocId(lang); try { const fieldToDelete = {}; fieldToDelete[fieldId] = firebase.firestore.FieldValue.delete(); await db.collection('content').doc(docId).update(fieldToDelete); element.remove(); unsavedChanges = false; } catch (error) { console.error("Error deleting:", error); } } } });
        document.addEventListener('keydown', (event) => { if (event.ctrlKey && event.key === 'l') { event.preventDefault(); loginModal.style.display = 'block'; document.getElementById('password').focus(); } if (event.key === "Escape") { if (modal.style.display === "block") closeModal(); if (loginModal.style.display === 'block') loginModal.style.display = 'none'; } });
        document.querySelectorAll('a').forEach(link => { link.addEventListener('click', (e) => { const href = link.getAttribute('href'); if (href && !href.startsWith('#') && !href.startsWith('mailto:') && !link.onclick) { if (!checkUnsavedChanges()) { e.preventDefault(); } } }); });
        document.addEventListener('DOMContentLoaded', async () => { const urlParams = new URLSearchParams(window.location.search); const lang = urlParams.get('lang') || 'cs'; setLanguage(lang); await loadContent(); });
    </script>
</body>
</html>